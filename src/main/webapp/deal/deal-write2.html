<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Upload</title>
    <meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" />
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.2/summernote.css">
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/header.css">
  <link rel="stylesheet" href="deal-write.css">
  <link rel="stylesheet" href="../css/footer.css">
</head>
<body>
  <div class='container'>
    <!--  헤더 추가 -->
    <div id='wrap-header'></div>
    
    <!-- 숨은메뉴, 숨은검색 -->
    <div id='wrap-hidden'></div>
    
    <!-- 소개글 -->
    <div id='div-intro-none'></div>
    
    <!-- 불매운동 페이지 -->
    <div id='wrap-content'>
      <!-- 불매운동 페이지 -->
      <div id='wrap-content'>
        <!-- 불매 헤더 -->
        <div id="title-bar-deal" class="title-bar">
          <nav>
            <span class='title-title'>Deal_Write</span><span class='title-sub edit-text'>공동구매 글을 작성해주세요 :)</span>
          </nav>
        </div>
        
        <div class='input-text'>
          <input type="text" id='input-title' class='input-text-el' placeholder="Title">
          <span class="separator input-text-el"></span>
        </div>
        <div class='input-text div-price'>
          <input type="text" id='input-price' class='input-text-el input-price' placeholder="Price">
          <span class="separator input-text-el input-price"></span>
        </div>
        <div class='input-text div-volume'>
          <input type="text" id='input-volume' class='input-text-el input-volume' placeholder="Volume">
          <span class="separator input-text-el input-volume"></span>
        </div>
        <div class='input-text div-datepicker'>
          <input type="text" id="start-date" class="input-text-el input-date datepicker" placeholder="Start Date">
          <span class="separator input-text-el input-date datepicker"></span>
        </div>
        <div class='input-text div-datepicker'>
          <input type="text" id="end-date" class="input-text-el input-date datepicker" placeholder="End Date">
          <span class="separator input-text-el input-date datepicker"></span>
        </div>
        <div class='input-text div-datepicker'>
          <input type="text" id="deliv-date" class="input-text-el input-date datepicker" placeholder="Delivery Date">
          <span class="separator input-text-el input-date datepicker"></span>
        </div>
        <span class='edit-text'>제품 사진을 추가해주세요 (1번:대표사진)</span>

    <form action="#">
      <input type="file" id="file1" name="image" >
      <button class="btn btn-sm btn-info upload" type="submit">Upload</button>
      <button type="button" class="btn btn-sm btn-danger cancel">Cancel</button>

      <div class="progress progress-striped active">
        <div class="progress-bar" style="width:0%"></div>
      </div>
    </form>

    <form action="#">
      <input type="file" id="file2" name="image" >
      <button class="btn btn-sm btn-info upload" type="submit">Upload</button>
      <button type="button" class="btn btn-sm btn-danger cancel">Cancel</button>

      <div class="progress progress-striped active">
        <div class="progress-bar" style="width:0%"></div>
      </div>
    </form>

    <form action="#">
      <input type="file" id="file3" name="image" >
      <button class="btn btn-sm btn-info upload" type="submit">Upload</button>
      <button type="button" class="btn btn-sm btn-danger cancel">Cancel</button>

      <div class="progress progress-striped active">
        <div class="progress-bar" style="width:0%"></div>
      </div>
    </form>

    <form action="#">
      <input type="file" id="file4" name="image" >
      <button class="btn btn-sm btn-info upload" type="submit">Upload</button>
      <button type="button" class="btn btn-sm btn-danger cancel">Cancel</button>

      <div class="progress progress-striped active">
        <div class="progress-bar" style="width:0%"></div>
      </div>
    </form>

    <hr>

    <button class="btn btn-sm btn-primary upload-all">Upload All</button>
    <button class="btn btn-sm btn-danger cancel-all">Cancel All</button>

          <div id='wrap-btn'>
          <a type='button' id='cancel' class='btn btn-default common-btn-black' href='deal.html'>Cancel</a>
          <a type='button' id='write' class='btn btn-default common-btn-white'>Write</a>
        </div>
        
      </div><!-- wrap-content -->
    
    </div><!-- container -->
  
    <!-- 풋터 -->
    <div id='wrap-footer'></div>
  </div>

<script src="../js/context.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script> 
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script> 
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.2/summernote.js"></script>
<script src='../js/common.js'></script>
<script src='deal-write2.js'></script>

  <script>
    $('.upload-all').click(function(){
      //submit all form
      $('form').submit();
    });
    $('.cancel-all').click(function(){
      //submit all form
      $('form .cancel').click();
    });
    $(document).on('submit','form',function(e){
      e.preventDefault();
      $form = $(this);
      uploadImage($form);
    });
    function uploadImage($form){
      $form.find('.progress-bar').removeClass('progress-bar-success')
                    .removeClass('progress-bar-danger');
      var formdata = new FormData($form[0]); //formelement
      var request = new XMLHttpRequest();
      //progress event...
      request.upload.addEventListener('progress',function(e){
        var percent = Math.round(e.loaded/e.total * 100);
        $form.find('.progress-bar').width(percent+'%').html(percent+'%');
      });
      //progress completed load event
      request.addEventListener('load',function(e){
        $form.find('.progress-bar').addClass('progress-bar-success').html('upload completed....');
      });
      request.open('post', serverRoot + '/common/fileupload.json');
      request.send(formdata);
      $form.on('click','.cancel',function(){
        request.abort();
        $form.find('.progress-bar')
          .addClass('progress-bar-danger')
          .removeClass('progress-bar-success')
          .html('upload aborted...');
      });
    }
    
  </script>



</body>
</html>