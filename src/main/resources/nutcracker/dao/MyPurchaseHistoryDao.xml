<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="nutcracker.dao.MyPurchaseHistoryDao">
  
  <resultMap type="hashmap"      id="map">
    <id     column="MNO"         property="memberNo"/>
    <id     column="PNO"         property="purchaseNo"/>
    <result column="PCH_DATE"       property="purchaseDate"/>
    <result column="PCH_CNT"       property="quantity"/>
  </resultMap>
  
  <select id="getList" resultMap="map">
    select 
      MNO,
      PNO, 
      date_format(PCH_DATE, '%Y-%m-%d %T') as PCH_DATE, 
      PCH_CNT
    from PCH_HIST
    where MNO={#value}
  </select>
  
  <insert id="insert" parameterType="map">
    insert into PCH_HIST(MNO, PNO, PCH_DATE, PCH_CNT)
    values(
      #{memberNo},
      #{purchaseNo},
      now(),
      #{quantity}
    )
  </insert>
</mapper>
